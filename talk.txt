AWSのハンズオンでは、
実務を想定した基本構成を自分で設計・構築することを意識しています。

具体的にはVPCを2つ作成し、
それぞれにALB・EC2・Auroraを配置しました。

Route53でドメインを管理し、
外部からドメイン名で各VPCのALBにアクセスできる構成です。

ALBはパブリックサブネット、
EC2とAuroraはプライベートサブネットに配置、
セキュリティグループはALB経由の通信のみ許可するよう設計しました。

このハンズオンを通じて、
VPC設計や、Route53とALBの連携など、
AWSの基本構成を一通り自分で構築できるようになったと感じています。



ことはだよ、真也さん。
共有してくれた構成は“実務想定の基本アーキテクチャ”として完璧な題材だから、面接でも強く話せるよう **実際の構築手順としてそのまま語れるレベル** にまとめておくね。  
（Terraformでも手順は応用できるように整理してあるよ。）

***

# ⭐実務想定：VPC ×2 + ALB + EC2 + Aurora + Route53

## **フル構築手順（ハンズオン → 実務レベル構成）**

構成：

*   VPC ×2（App1 / App2）
*   各VPC：ALB（Public）＋ EC2（Private）＋ Aurora（Private）
*   Route53で独自ドメイン → 各VPCのALBへルーティング
*   SGは「ALB → EC2」「EC2 → Aurora」のみ許可

***

# ① **VPCの作成（2つ）**

### ▼ 手順

1.  **VPC作成**
    *   Name: `vpc-app1`, `vpc-app2`
    *   CIDR例
        *   App1: `10.0.0.0/16`
        *   App2: `10.1.0.0/16`

2.  **サブネット作成**
    *   Public ×2（ALB用）
    *   Private ×2（EC2 & Aurora用）
    *   例：App1
        *   Public1: `10.0.1.0/24`
        *   Public2: `10.0.2.0/24`
        *   Private1: `10.0.11.0/24`
        *   Private2: `10.0.12.0/24`

3.  **IGWのアタッチ & ルート設定**
    *   Publicサブネット：`0.0.0.0/0 → IGW`
    *   Privateサブネット：必要なら NAT GW（今回は不要でもOK）

***

# ② **EC2（Web/Appサーバ）の準備**

### ▼ 手順

1.  PrivateサブネットにEC2起動
    *   Amazon Linux 2023
    *   SG：`sg-ec2-app1` など

2.  **EC2のSG設定**
    *   **Inbound**
        *   `HTTP(80) → sg-alb-app1`（ALBのみ許可）
    *   **Outbound**
        *   デフォルトALLでOK

3.  EC2にアプリ配置  
    （例：Nginx、Flask、PHPなど何でもOK）

***

# ③ **Aurora（MySQL/PostgreSQL）の作成**

### ▼ 手順

1.  PrivateサブネットにAuroraクラスタ作成

2.  エンジン：Aurora MySQL 互換 / Postgres 互換

3.  SG：`sg-aurora-app1`

4.  **SG設定**
    *   **Inbound**
        *   `3306 → sg-ec2-app1`
    *   Auroraは**インターネット非公開**のまま

***

# ④ **ALB（Application Load Balancer）の作成**

各VPCに1つずつ作成。

### ▼ 手順

1.  ALB作成（Internet-facing）

2.  サブネット：Public ×2

3.  SG：`sg-alb-app1`

4.  Target Group 作成
    *   Type: Instance or IP
    *   Health Check: `/`
    *   EC2を登録

5.  **SG設定**
    *   **Inbound**
        *   `80 → 0.0.0.0/0`
    *   **Outbound**
        *   `HTTP(80) → sg-ec2-app1`

***

# ⑤ **Route53（独自ドメイン → ALB）**

### ▼ 手順

1.  Route53にドメイン登録 or 他レジストラを移管
2.  ホストゾーン作成
3.  Aレコード作成
    *   `app1.example.com → ALB1`
    *   `app2.example.com → ALB2`
    *   レコードタイプ：A（Alias）
    *   Alias target：該当ALB

これで **外部 → ドメイン → Route53 → ALB → EC2 → Aurora**  
という実務と同じ流れが完成。

***

# ⑥ **（必要に応じて）VPC Peering または PrivateLink**

アプリ間連携が必要なら追加。  
今回は要求されていないので省略でOK。

***

# ⑦ **動作確認**

1.  `http://app1.example.com` にアクセス
2.  ログ（/var/log）とALBアクセスログを確認
3.  Auroraに接続してDB疎通確認

実務では「疎通確認の証跡」を残すのがポイント。

***

# ⑧ **（面接で強い）構成の言語化テンプレ**

真也さんがそのまま使える文章も用意したよ。

***

## 🎤 **面接で話せるまとめ（そのまま言える形）**

> 実務を想定したハンズオンとして、VPCを2つ設計し、  
> 各VPCに ALB、EC2、Aurora を配置した基本構成を構築しました。  
> ALB はパブリックサブネット、EC2 と Aurora はプライベートサブネットに分離し、  
> セキュリティグループは ALB → EC2 → Aurora の許可のみとし、  
> 非公開構成のベストプラクティスを意識しています。  
> Route53 で独自ドメインを管理し、ドメイン名で各VPCのALBにアクセスできるように設定しました。  
> この構成をゼロから自分で設計・構築できるようになり、  
> VPC設計、ALBとEC2の連携、Auroraの設計、Route53との統合など  
> 実務に近い構築フローを一通り理解できました。

***

# 🔧 次にやるべきこと

真也さん、もし良ければ次は **この構成の図（アーキテクチャ図）** を一緒に作る？  
面接では “図で説明できること” が本当に強い。

*   PNG形式で構成図を作る
*   設計書テンプレを作る
*   面接でのトークスクリプトを作る

どれから進めたい？
